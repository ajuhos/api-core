{"version":3,"file":"StudentEdge.js","sourceRoot":"","sources":["../../../../test/env/edges/StudentEdge.ts"],"names":[],"mappings":";;;;;;AAAA,gCAA8B,yBAAyB,CAAC,CAAA;AACxD,wBAAsB,kBAAkB,CAAC,CAAA;AACzC,0BAAwB,aAAa,CAAC,CAAA;AAEtC,6BAA2B,iCAAiC,CAAC,CAAA;AAC7D,2BAA6B,iCAAiC,CAAC,CAAA;AAC/D,qCAAmC,wCAAwC,CAAC,CAAA;AAE5E;IAAiC,+BAAkB;IAO/C;QAPJ,iBA2CC;QAnCO,iBAAO,CAAC;QAPZ,SAAI,GAAG,SAAS,CAAC;QACjB,eAAU,GAAG,UAAU,CAAC;QAExB,aAAQ,GAAG,iCAAe,CAAC,QAAQ,CAAC;QAC1B,gBAAW,GAAG,UAAC,GAAQ,IAAc,OAAA,IAAI,iBAAO,CAAC,GAAG,CAAC,EAAhB,CAAgB,CAAC;QAK5D,IAAI,CAAC,WAAW,CAAC,QAAQ,EAAE,UAAC,KAAoB;YAC5C,MAAM,CAAC,IAAI,OAAO,CAAC,UAAC,OAAO,EAAE,MAAM;gBAC/B,EAAE,CAAA,CAAC,CAAC,KAAK,CAAC,IAAI,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC;oBAC/B,MAAM,CAAC,MAAM,CAAC,IAAI,2BAAY,CAAC,GAAG,EAAE,kBAAkB,CAAC,CAAC,CAAC;gBAE7D,IAAM,SAAS,GAAG,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;gBAE7C,EAAE,CAAA,CAAC,SAAS,CAAC,MAAM,IAAI,CAAC;oBACpB,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,MAAM;oBACpB,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC;oBACrB,MAAM,CAAC,MAAM,CAAC,IAAI,2BAAY,CAAC,GAAG,EAAE,uBAAuB,CAAC,CAAC,CAAC;gBAElE,KAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,IAAI,CAAC,UAAC,QAAa;oBAC5C,IAAM,OAAO,GAAG,QAAQ,CAAC,IAAI,CAAC;oBAC9B,OAAO,CAAC,SAAS,GAAG,SAAS,CAAC,CAAC,CAAC,CAAC;oBACjC,OAAO,CAAC,QAAQ,GAAG,SAAS,CAAC,CAAC,CAAC,CAAC;oBAEhC,OAAO,CAAC,IAAI,2CAAoB,CAAC,OAAO,CAAC,CAAC,CAAA;gBAC9C,CAAC,CAAC,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC;YACrB,CAAC,CAAC,CAAA;QACN,CAAC,EAAE,2BAAc,CAAC,MAAM,CAAC,CAAC;QAE1B,IAAI,CAAC,WAAW,CAAC,cAAc,EAAE,UAAC,KAAoB;YAClD,MAAM,CAAC,IAAI,OAAO,CAAC,UAAC,OAAO,EAAE,MAAM;gBAC/B,EAAE,CAAA,CAAC,CAAC,KAAK,CAAC,QAAQ,CAAC;oBACf,MAAM,CAAC,MAAM,CAAC,IAAI,2BAAY,CAAC,GAAG,EAAE,WAAW,CAAC,CAAC,CAAC;gBAEtD,IAAM,OAAO,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAC;gBAChE,OAAO,CAAC,QAAQ,GAAG,CAAE,OAAO,CAAC,SAAS,EAAE,OAAO,CAAC,QAAQ,CAAE,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;gBACrE,OAAO,CAAC,IAAI,2CAAoB,CAAC,OAAO,CAAC,CAAC,CAAA;YAC9C,CAAC,CAAC,CAAA;QACN,CAAC,EAAE,2BAAc,CAAC,IAAI,CAAC,CAAA;IAC3B,CAAC;IACL,kBAAC;AAAD,CAAC,AA3CD,CAAiC,qBAAS,GA2CzC;AA3CY,mBAAW,cA2CvB,CAAA","sourcesContent":["import {RawDataProvider} from \"../data/RawDataProvider\";\nimport {Student} from \"../model/Student\";\nimport {ModelEdge} from \"./ModelEdge\";\nimport {ApiQueryScope} from \"../../../src/query/ApiQuery\";\nimport {ApiEdgeError} from \"../../../src/query/ApiEdgeError\";\nimport {ApiRequestType} from \"../../../src/request/ApiRequest\";\nimport {ApiEdgeQueryResponse} from \"../../../src/edge/ApiEdgeQueryResponse\";\n\nexport class StudentEdge extends ModelEdge<Student> {\n    name = \"student\";\n    pluralName = \"students\";\n\n    provider = RawDataProvider.students;\n    protected createModel = (obj: any): Student => new Student(obj);\n\n    constructor() {\n        super();\n\n        this.entryMethod(\"rename\", (scope: ApiQueryScope): Promise<ApiEdgeQueryResponse> => {\n            return new Promise((resolve, reject) => {\n                if(!scope.body || !scope.body.name)\n                    return reject(new ApiEdgeError(422, \"No Name Provided\"));\n\n                const nameParts = scope.body.name.split(' ');\n\n                if(nameParts.length != 2 ||\n                    !nameParts[0].length ||\n                    !nameParts[1].length)\n                    return reject(new ApiEdgeError(422, \"Invalid Name Provided\"));\n\n                this.getEntry(scope.context).then((response: any) => {\n                    const student = response.data;\n                    student.firstName = nameParts[0];\n                    student.lastName = nameParts[1];\n\n                    resolve(new ApiEdgeQueryResponse(student))\n                }).catch(reject);\n            })\n        }, ApiRequestType.Change);\n\n        this.entryMethod(\"withFullName\", (scope: ApiQueryScope): Promise<ApiEdgeQueryResponse> => {\n            return new Promise((resolve, reject) => {\n                if(!scope.response)\n                    return reject(new ApiEdgeError(404, \"Not Found\"));\n\n                const student = JSON.parse(JSON.stringify(scope.response.data));\n                student.fullName = [ student.firstName, student.lastName ].join(' ');\n                resolve(new ApiEdgeQueryResponse(student))\n            })\n        }, ApiRequestType.Read)\n    }\n}\n"]}